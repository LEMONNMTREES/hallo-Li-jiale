<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæ—¥å¿«ä¹ï¼æä½³ä¹å°æœ‹å‹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'Microsoft YaHei', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            position: relative;
            color: white;
        }
        
        /* å·¦å³èƒŒæ™¯å›¾ç‰‡å®¹å™¨ */
        .background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            display: flex;
        }
        
        .left-bg, .right-bg {
            width: 50%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }
        
        .left-bg {
            background: linear-gradient(to right, rgba(26, 26, 46, 0.7), rgba(26, 26, 46, 0.9));
        }
        
        .right-bg {
            background: linear-gradient(to left, rgba(22, 33, 62, 0.7), rgba(22, 33, 62, 0.9));
        }
        
        .bg-image {
            position: absolute;
            top: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.5;
        }
        
        .left-bg .bg-image {
            left: 0;
            filter: sepia(1) hue-rotate(180deg) brightness(0.7);
        }
        
        .right-bg .bg-image {
            right: 0;
            filter: sepia(0.5) hue-rotate(300deg) brightness(0.7);
        }
        
        /* è§’è‰²è´´çº¸å®¹å™¨ */
        .character-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }
        
        .character-float {
            position: absolute;
            width: 120px;
            height: 120px;
            opacity: 0.6;
            animation: float 8s ease-in-out infinite;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.3));
        }
        
        .star-rail-char {
            left: 10%;
            top: 20%;
            animation-delay: 0s;
        }
        
        .star-rail-char2 {
            left: 5%;
            bottom: 20%;
            animation-delay: -2s;
        }
        
        .demon-slayer-char {
            right: 10%;
            top: 30%;
            animation-delay: -1s;
        }
        
        .demon-slayer-char2 {
            right: 5%;
            bottom: 15%;
            animation-delay: -3s;
        }
        
        @keyframes float {
            0%, 100% { 
                transform: translateY(0) rotate(0deg) scale(1);
            }
            50% { 
                transform: translateY(-30px) rotate(5deg) scale(1.05);
            }
        }
        
        /* å¼€ç¯‡é¡µé¢ */
        .intro-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.85), rgba(26, 26, 46, 0.9));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 1s ease;
            backdrop-filter: blur(5px);
        }
        
        .intro-title {
            color: #ff6b6b;
            font-size: 3.5em;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 
                0 0 20px rgba(255, 107, 107, 0.5),
                0 0 40px rgba(255, 107, 107, 0.3);
            animation: pulse 2s ease-in-out infinite;
            background: linear-gradient(45deg, #ff6b6b, #ffd166);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        @keyframes pulse {
            0%, 100% { 
                transform: scale(1);
                text-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
            }
            50% { 
                transform: scale(1.05);
                text-shadow: 0 0 40px rgba(255, 107, 107, 0.8);
            }
        }
        
        .intro-subtitle {
            color: #4ecdc4;
            font-size: 1.3em;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .game-hint {
            color: #ffd166;
            font-size: 1.1em;
            margin-top: 20px;
            text-align: center;
            max-width: 80%;
            line-height: 1.5;
        }
        
        .continue-btn {
            background: linear-gradient(45deg, #ff6b6b, #ff8e53);
            color: white;
            border: none;
            padding: 18px 45px;
            font-size: 1.3em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 
                0 8px 20px rgba(255, 107, 107, 0.4),
                inset 0 1px 1px rgba(255, 255, 255, 0.2);
            margin-top: 30px;
            font-weight: bold;
            letter-spacing: 1px;
        }
        
        .continue-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 
                0 12px 25px rgba(255, 107, 107, 0.6),
                inset 0 1px 1px rgba(255, 255, 255, 0.3);
        }
        
        /* ä¸»å†…å®¹ */
        .main-content {
            display: none;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }
        
        .birthday-card {
            background: rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            padding: 40px 30px;
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            text-align: center;
            margin-top: 30px;
            position: relative;
            overflow: hidden;
        }
        
        .birthday-title {
            color: #ffd166;
            font-size: 2.8em;
            margin-bottom: 25px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            background: linear-gradient(45deg, #ffd166, #ff9a3c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: titleGlow 3s ease-in-out infinite;
        }
        
        @keyframes titleGlow {
            0%, 100% { 
                filter: drop-shadow(0 0 5px rgba(255, 209, 102, 0.3));
            }
            50% { 
                filter: drop-shadow(0 0 15px rgba(255, 209, 102, 0.6));
            }
        }
        
        .friend-name {
            color: #ff6b6b;
            font-size: 2.2em;
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 
                0 0 20px rgba(255, 107, 107, 0.5),
                0 0 40px rgba(255, 107, 107, 0.3);
            padding: 10px 20px;
            display: inline-block;
            border-radius: 15px;
            background: rgba(255, 107, 107, 0.1);
            animation: namePulse 2s ease-in-out infinite;
        }
        
        @keyframes namePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .message {
            font-size: 1.3em;
            line-height: 1.8;
            margin: 30px 0;
            color: rgba(255, 255, 255, 0.95);
        }
        
        .wishes-box {
            background: rgba(255, 249, 230, 0.15);
            border-left: 4px solid #ffd166;
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: left;
        }
        
        .wish-item {
            font-size: 1.2em;
            margin: 15px 0;
            padding-left: 10px;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .special-wish {
            background: linear-gradient(45deg, 
                rgba(157, 78, 221, 0.25), 
                rgba(0, 187, 249, 0.25));
            color: #9d4edd;
            font-size: 1.6em;
            font-weight: bold;
            padding: 25px;
            border-radius: 20px;
            margin: 35px 0;
            border: 2px solid rgba(157, 78, 221, 0.4);
            box-shadow: 
                0 8px 25px rgba(157, 78, 221, 0.3),
                inset 0 1px 1px rgba(255, 255, 255, 0.2);
            animation: specialGlow 2s ease-in-out infinite;
        }
        
        @keyframes specialGlow {
            0%, 100% { 
                box-shadow: 
                    0 8px 25px rgba(157, 78, 221, 0.3),
                    inset 0 1px 1px rgba(255, 255, 255, 0.2);
            }
            50% { 
                box-shadow: 
                    0 8px 35px rgba(157, 78, 221, 0.5),
                    inset 0 1px 1px rgba(255, 255, 255, 0.3);
            }
        }
        
        /* å¯ç‚¹å‡»çš„è›‹ç³•æŒ‰é’® */
        .cake-game {
            margin: 40px auto;
            text-align: center;
        }
        
        .cake-container {
            display: inline-block;
            cursor: pointer;
            transition: transform 0.3s ease;
            position: relative;
        }
        
        .cake-button {
            width: 180px;
            height: 180px;
            background: linear-gradient(135deg, #ff9a3c, #ff6b6b);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto;
            font-size: 4em;
            color: white;
            box-shadow: 
                0 15px 35px rgba(255, 107, 107, 0.4),
                inset 0 5px 15px rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .cake-button::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1%, transparent 1%);
            background-size: 20px 20px;
            opacity: 0.3;
        }
        
        .cake-button:hover {
            transform: rotate(5deg) scale(1.05);
            animation: cakeShake 0.5s ease-in-out;
        }
        
        @keyframes cakeShake {
            0%, 100% { transform: rotate(0) scale(1.05); }
            25% { transform: rotate(-2deg) scale(1.05); }
            50% { transform: rotate(2deg) scale(1.05); }
            75% { transform: rotate(-1deg) scale(1.05); }
        }
        
        .age-number {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3em;
            font-weight: bold;
            color: white;
            text-shadow: 
                3px 3px 6px rgba(0, 0, 0, 0.4),
                0 0 20px rgba(255, 255, 255, 0.3);
            z-index: 2;
        }
        
        .cake-candles {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.5em;
            filter: drop-shadow(0 0 5px rgba(255, 209, 102, 0.5));
            animation: candleFlicker 1.5s ease-in-out infinite;
        }
        
        @keyframes candleFlicker {
            0%, 100% { opacity: 1; transform: translateX(-50%) scale(1); }
            50% { opacity: 0.8; transform: translateX(-50%) scale(1.1); }
        }
        
        .game-hint {
            color: #4ecdc4;
            margin-top: 15px;
            font-size: 1.2em;
        }
        
        /* æ§åˆ¶æŒ‰é’® */
        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(10px);
        }
        
        .action-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-3px);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        /* éŸ³ä¹æ§åˆ¶ */
        .music-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 100;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .music-control:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 0.25);
        }
        
        .music-icon {
            font-size: 24px;
            color: #ffd166;
        }
        
        /* ç¤¼ç‚®æ•ˆæœ */
        .confetti {
            position: fixed;
            pointer-events: none;
            z-index: 999;
            font-size: 20px;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .intro-title { font-size: 2.5em; }
            .birthday-title { font-size: 2.2em; }
            .friend-name { font-size: 1.8em; }
            .message { font-size: 1.1em; }
            .cake-button { 
                width: 150px; 
                height: 150px;
                font-size: 3em;
            }
            .age-number { font-size: 2.5em; }
            .character-float { 
                width: 80px !important; 
                height: 80px !important;
            }
            .left-bg, .right-bg { width: 100%; }
            .background-container { flex-direction: column; }
            .control-buttons { flex-direction: column; align-items: center; }
            .action-btn { width: 90%; justify-content: center; }
            .special-wish { font-size: 1.3em; padding: 15px; }
        }
        
        /* çƒŸèŠ±æ•ˆæœ */
        .firework {
            position: fixed;
            pointer-events: none;
            z-index: 998;
        }
    </style>
</head>
<body>
    <!-- å·¦å³èƒŒæ™¯å›¾ç‰‡ -->
    <div class="background-container">
        <div class="left-bg">
            <!-- æ˜Ÿç©¹é“é“å›¾ç‰‡ï¼ˆåœ¨çº¿é“¾æ¥ï¼‰ -->
            <img class="bg-image" id="starRailBg" src="https://upload-bbs.miyoushe.com/upload/2024/04/26/76623774/250e75c1dccda616bc948ccee850aa17_2568942679228705048.jpg?x-oss-process=image/resize,s_600/quality,q_80/auto-orient,0/interlace,1/format,jpg" alt="æ˜Ÿç©¹é“é“ä¸»é¢˜èƒŒæ™¯">
        </div>
        <div class="right-bg">
            <!-- é¬¼ç­ä¹‹åˆƒå›¾ç‰‡ï¼ˆåœ¨çº¿é“¾æ¥ï¼‰ -->
            <img class="bg-image" id="demonSlayerBg" src="https://i.bobopic.com/small/89757205.jpg" alt="é¬¼ç­ä¹‹åˆƒä¸»é¢˜èƒŒæ™¯">
        </div>
    </div>
    
    <!-- æµ®åŠ¨è§’è‰²è´´çº¸ -->
    <div class="character-overlay">
        <!-- æ˜Ÿç©¹é“é“è§’è‰²1 -->
        <img class="character-float star-rail-char" id="starRailChar1" 
             src="https://media.9game.cn/gamebase/ieu-gdc-pre-process/images/20230510/9/9/6fcfc4e100248e2c3c25ae2bcbab85d0.jpg" 
             alt="æ˜Ÿç©¹é“é“è§’è‰²">
        
        <!-- æ˜Ÿç©¹é“é“è§’è‰²2 -->
        <img class="character-float star-rail-char2" id="starRailChar2"
             src="https://media.9game.cn/gamebase/2021/9/22/228712422.jpg"
             alt="æ˜Ÿç©¹é“é“è§’è‰²">
        
        <!-- é¬¼ç­ä¹‹åˆƒè§’è‰²1 -->
        <img class="character-float demon-slayer-char" id="demonSlayerChar1"
             src="https://pic.nximg.cn/file/20201230/28594427_145814718000_2.jpg"
             alt="é¬¼ç­ä¹‹åˆƒè§’è‰²">
        
        <!-- é¬¼ç­ä¹‹åˆƒè§’è‰²2 -->
        <img class="character-float demon-slayer-char2" id="demonSlayerChar2"
             src="https://c-ssl.dtstatic.com/uploads/blog/202307/02/5zSN63YytOJ9Ex3.thumb.400_0.jpg"
             alt="é¬¼ç­ä¹‹åˆƒè§’è‰²">
    </div>
    
    <!-- å¼€ç¯‡é¡µé¢ -->
    <div class="intro-screen" id="introScreen">
        <h1 class="intro-title">ğŸ‚ æä½³ä¹å°æœ‹å‹ ğŸ‚</h1>
        <p class="intro-subtitle">å½“æ˜Ÿç©¹é“é“é‡è§é¬¼ç­ä¹‹åˆƒ</p>
        <p class="intro-subtitle">ä¸ºä½ é€ä¸Šæœ€ç‰¹åˆ«çš„ç”Ÿæ—¥ç¥ç¦ï¼</p>
        
        <div style="margin: 30px 0; font-size: 1.5em; color: #ffd166;">
            <span>âœ¨</span>
            <span style="color:#4ecdc4;">ç”Ÿ</span>
            <span style="color:#ff6b6b;">æ—¥</span>
            <span style="color:#9d4edd;">å¿«</span>
            <span style="color:#00bbf9;">ä¹</span>
            <span>âœ¨</span>
        </div>
        
        <p class="game-hint">
            ç‚¹å‡»å¼€å§‹æŒ‰é’®ï¼Œå¼€å¯è¿™åœºè·¨è¶Šæ¬¡å…ƒçš„ç”Ÿæ—¥æ´¾å¯¹ï¼<br>
            å†…å«ï¼šğŸ® äºŒæ¸¸ç©å®¶ä¸“å±ç¥ç¦ + ğŸ‚ äº’åŠ¨è›‹ç³•æ¸¸æˆ + âœ¨ ç‚«é…·ç‰¹æ•ˆ
        </p>
        
        <button class="continue-btn" onclick="startBirthday()">
            ğŸš€ å¼€å¯ç”Ÿæ—¥æƒŠå–œ ğŸš€
        </button>
        
        <div style="margin-top: 40px; color: rgba(255,255,255,0.6); font-size: 0.9em;">
            <p>ğŸ’« å·¦è¾¹ï¼šæ˜Ÿç©¹é“é“ä¸–ç•Œ | å³è¾¹ï¼šé¬¼ç­ä¹‹åˆƒæˆ˜åœº</p>
            <p>ğŸ® ä¸“å±ç¥ç¦ï¼šç¥ä½ æ°¸è¿œä¸ä¼šå¤§ä¿åº•ï¼</p>
        </div>
    </div>
    
    <!-- ä¸»å†…å®¹ -->
    <div class="main-content" id="mainContent">
        <div class="birthday-card">
            <h1 class="birthday-title">Happy Birthday!</h1>
            <div class="friend-name">ğŸ® æä½³ä¹å°æœ‹å‹ ğŸ®</div>
            
            <div class="message">
                <p>è·¨è¶Šæ˜Ÿç©¹ä¸å‰‘æˆŸçš„ä¸–ç•Œï¼Œ</p>
                <p>æ±‡èšæˆå¯¹ä½ çš„æœ€çœŸæŒšç¥ç¦ï¼</p>
            </div>
            
            <div class="wishes-box">
                <div class="wish-item">âœ¨ æ„¿ä½ åƒå¼€æ‹“è€…ä¸€æ ·å‹‡å¾€ç›´å‰</div>
                <div class="wish-item">ğŸ—¡ï¸ æ„¿ä½ åƒç‚­æ²»éƒä¸€æ ·åšå¼ºä¸å±ˆ</div>
                <div class="wish-item">ğŸŒŸ æ„¿ä½ çš„äººç”Ÿå¦‚æ˜Ÿç©¹èˆ¬ç’€ç’¨</div>
                <div class="wish-item">ğŸŒ¸ æ„¿ä½ çš„ç¬‘å®¹å¦‚ç¥¢è±†å­èˆ¬çº¯çœŸ</div>
                <div class="wish-item">ğŸ® æ„¿ä½ çš„æŠ½å¡æ°¸è¿œä¸æ­ªä¸ä¿åº•</div>
                <div class="wish-item">ğŸ’– æ„¿æ¯ä¸€å¤©éƒ½å……æ»¡é˜³å…‰å’Œæ¬¢ç¬‘</div>
            </div>
            
            <div class="special-wish">
                ğŸ‰ æ¥è‡ªäºŒæ¬¡å…ƒçš„åŒé‡ç¥ç¦ï¼š<br>
                ğŸš€ æ˜Ÿç©¹é“é“æ°¸ä¸æ­ª + ğŸ—¡ï¸ é¬¼ç­æŠ½å¡å¿…å‡ºé‡‘ï¼<br>
                ğŸ® ç¥ä½ äºŒæ¸¸æ°¸è¿œä¸ä¼šå¤§ä¿åº•ï¼ ğŸ®
            </div>
            
            <!-- è›‹ç³•äº’åŠ¨æ¸¸æˆ -->
            <div class="cake-game">
                <h3 style="color:#ffd166; margin-bottom: 20px;">ğŸ‚ ç‚¹å‡»è›‹ç³•ï¼Œåº†ç¥ä½ çš„19å²ï¼ ğŸ‚</h3>
                <div class="cake-container" onclick="growCake()">
                    <div class="cake-button" id="cakeButton">
                        <div class="cake-candles" id="candles">ğŸ•¯ï¸ğŸ•¯ï¸ğŸ•¯ï¸ğŸ•¯ï¸ğŸ•¯ï¸</div>
                        <div class="age-number" id="ageNumber">19</div>
                    </div>
                </div>
                <p class="game-hint" id="cakeHint">ğŸ’« ç‚¹å‡»è›‹ç³•è®©å®ƒé•¿å¤§ï¼å½“å‰ï¼šæ­£å¸¸å°ºå¯¸</p>
                <p style="color: rgba(255,255,255,0.7); margin-top: 10px; font-size: 1em;">
                    ç‚¹å‡»æ¬¡æ•°ï¼š<span id="clickCount">0</span> æ¬¡ | è›‹ç³•å¤§å°ï¼š<span id="cakeSizeDisplay">180</span>px
                </p>
            </div>
            
            <!-- æ§åˆ¶æŒ‰é’® -->
            <div class="control-buttons">
                <button class="action-btn" onclick="createConfetti()">
                    ğŸ‰ æ’’èŠ±åº†ç¥
                </button>
                <button class="action-btn" onclick="createFireworks()">
                    âœ¨ æ”¾çƒŸèŠ±
                </button>
                <button class="action-btn" onclick="changeCharacter()">
                    ğŸ”„ æ›´æ¢è§’è‰²
                </button>
                <button class="action-btn" onclick="showRandomMessage()">
                    ğŸ’ éšæœºç¥ç¦
                </button>
            </div>
            
            <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
                <p style="color: rgba(255,255,255,0.8); font-size: 0.9em;">
                    ğŸ® æ˜Ÿç©¹é“é“ Ã— é¬¼ç­ä¹‹åˆƒ è”åˆçŒ®ç¤¼<br>
                    ğŸ’« æ„¿ä½ åœ¨è¿™ä¸ªç‰¹åˆ«çš„æ—¥å­ï¼Œæ„Ÿå—åˆ°æ¥è‡ªä¸¤ä¸ªä¸–ç•Œçš„ç¥ç¦ï¼
                </p>
            </div>
        </div>
    </div>
    
    <!-- éŸ³ä¹æ§åˆ¶ -->
    <div class="music-control" onclick="toggleMusic()">
        <div class="music-icon" id="musicIcon">ğŸµ</div>
    </div>
    
    <!-- éŸ³é¢‘ -->
    <audio id="birthdayMusic" loop>
        <!-- ä½¿ç”¨å¯é çš„åœ¨çº¿ç”Ÿæ—¥å¿«ä¹éŸ³ä¹ -->
        <source src="http://music.163.com/song/media/outer/url?id=2018746130.mp3">
    </audio>
    
    <!-- çƒŸèŠ±éŸ³æ•ˆ -->
    <audio id="fireworkSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-party-horn-sound-2927.mp3" type="audio/mpeg">
    </audio>

    <script>
        // é…ç½®ï¼šæ‰€æœ‰å›¾ç‰‡å’ŒéŸ³ä¹éƒ½ä½¿ç”¨åœ¨çº¿é“¾æ¥ï¼Œæ— éœ€ä¸‹è½½ï¼
        const CONFIG = {
            // èƒŒæ™¯å›¾ç‰‡ï¼ˆæ˜Ÿç©¹é“é“ä¸»é¢˜ - åœ¨çº¿å›¾ç‰‡ï¼‰
            starRailBackgrounds: [
                'https://c-ssl.dtstatic.com/uploads/blog/202304/25/20230425151413_d65ed.thumb.400_0.png',
                'https://c-ssl.duitang.com/uploads/blog/202207/29/20220729001940_28057.jpg',
                'https://c-ssl.dtstatic.com/uploads/blog/202304/25/20230425151618_46708.thumb.400_0.png'
            ],
            
            // é¬¼ç­ä¹‹åˆƒä¸»é¢˜ - åœ¨çº¿å›¾ç‰‡
            demonSlayerBackgrounds: [
                'https://c-ssl.duitang.com/uploads/blog/202208/23/20220823190039_c5319.jpeg',
                'https://c-ssl.duitang.com/uploads/item/202007/11/20200711143410_tkhwh.jpeg',
                'https://c-ssl.dtstatic.com/uploads/blog/202201/28/20220128003254_10702.thumb.1000_0.jpg'
            ],
            
            // éŸ³ä¹
            musicUrl: 'http://music.163.com/song/media/outer/url?id=2018746130.mp3',
            fireworkSoundUrl: 'https://assets.mixkit.co/sfx/preview/mixkit-party-horn-sound-2927.mp3'
        };

        // åˆå§‹åŒ–å˜é‡
        let cakeSize = 180;
        let clickCount = 0;
        let musicPlaying = false;
        let birthdayStarted = false;
        const birthdayMusic = document.getElementById('birthdayMusic');
        const fireworkSound = document.getElementById('fireworkSound');
        
        // ç”Ÿæ—¥ç¥ç¦è¯­
        const birthdayMessages = [
            "ç”Ÿæ—¥å¿«ä¹ï¼æ„¿æ˜Ÿç©¹çš„å…‰èŠ’æ°¸è¿œç…§è€€ä½ ï¼",
            "æ–°çš„ä¸€å²ï¼Œæ„¿ä½ èƒ½åƒå¼€æ‹“è€…ä¸€æ ·å‹‡æ•¢æ¢ç´¢ï¼",
            "ç¥ä½ æŠ½å¡å¿…å‡ºé‡‘ï¼Œåè¿åŒé»„è›‹ï¼Œæ°¸è¿œä¸ä¿åº•ï¼",
            "æ„¿ä½ åƒç‚­æ²»éƒä¸€æ ·åšå¼ºï¼Œåƒç¥¢è±†å­ä¸€æ ·å¯çˆ±ï¼",
            "æ˜Ÿç©¹é“é“ä¹‹æ—…ï¼Œæ„¿ä½ çš„æ¯ä¸€æ¬¡å¼€æ‹“éƒ½å……æ»¡æƒŠå–œï¼",
            "ç”Ÿæ—¥å¿«ä¹ï¼Œæ„¿ä½ çš„ä¸–ç•Œå¦‚äºŒæ¬¡å…ƒèˆ¬ç²¾å½©ç»šçƒ‚ï¼",
            "æ¥è‡ªæ˜Ÿç©¹ä¸é¬¼ç­çš„åŒé‡ç¥ç¦ï¼Œè¯·æŸ¥æ”¶ï¼",
            "æ„¿ä½ çš„19å²ï¼Œå……æ»¡æ¬¢ç¬‘ã€æƒŠå–œå’Œæ— å°½çš„å¯èƒ½ï¼"
        ];

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        function initPage() {
            console.log('ç”Ÿæ—¥ç¥ç¦é¡µé¢åˆå§‹åŒ–...');
            preloadAudio();
            
            // è®¾ç½®éŸ³ä¹æº
            birthdayMusic.src = CONFIG.musicUrl;
            fireworkSound.src = CONFIG.fireworkSoundUrl;
            
            // æ·»åŠ è§¦æ‘¸äº‹ä»¶æ”¯æŒ
            document.addEventListener('touchstart', function() {}, {passive: true});
            
            // æ·»åŠ é”®ç›˜æ”¯æŒ
            document.addEventListener('keydown', function(e) {
                if (e.code === 'Space' || e.code === 'Enter') {
                    if (!birthdayStarted) {
                        startBirthday();
                    } else {
                        createConfetti();
                    }
                }
            });
            
            console.log('åˆå§‹åŒ–å®Œæˆï¼Œç­‰å¾…ç”¨æˆ·å¼€å§‹...');
        }

        // é¢„åŠ è½½éŸ³é¢‘
        function preloadAudio() {
            birthdayMusic.volume = 0.5;
            fireworkSound.volume = 0.7;
            
            // å°è¯•é¢„åŠ è½½
            birthdayMusic.load();
            fireworkSound.load();
        }

        // å¼€å§‹ç”Ÿæ—¥ç¥ç¦
        function startBirthday() {
            if (birthdayStarted) return;
            
            birthdayStarted = true;
            console.log('å¼€å§‹ç”Ÿæ—¥ç¥ç¦ï¼');
            
            const introScreen = document.getElementById('introScreen');
            const mainContent = document.getElementById('mainContent');
            
            // æ’­æ”¾éŸ³ä¹
            playMusic();
            
            // ç››å¤§å¼€åœºç‰¹æ•ˆ
            createFireworks();
            setTimeout(() => {
                createConfetti();
                showFireworkText('ğŸ‚ æä½³ä¹ï¼Œç”Ÿæ—¥å¿«ä¹ï¼ ğŸ‚');
            }, 300);
            
            setTimeout(() => {
                createFireworks();
                showFireworkText('ğŸš€ æ˜Ÿç©¹é“é“ Ã— ğŸ—¡ï¸ é¬¼ç­ä¹‹åˆƒ');
            }, 1000);
            
            // åˆ‡æ¢é¡µé¢
            introScreen.style.opacity = '0';
            setTimeout(() => {
                introScreen.style.display = 'none';
                mainContent.style.display = 'block';
                
                // å…¥åœºåŠ¨ç”»
                mainContent.style.animation = 'fadeIn 1s ease';
                
                // è‡ªåŠ¨åº†ç¥
                setTimeout(() => {
                    createConfetti();
                    showFireworkText('æ¬¢è¿æ¥åˆ°ç”Ÿæ—¥æ´¾å¯¹ï¼');
                }, 500);
                
                // è‡ªåŠ¨æ’’èŠ±ï¼ˆæ¯éš”å‡ ç§’ï¼‰
                setInterval(() => {
                    if (Math.random() > 0.6) {
                        createSmallConfetti();
                    }
                }, 3000);
                
            }, 1000);
        }

        // æ’­æ”¾éŸ³ä¹
        function playMusic() {
            birthdayMusic.play().then(() => {
                musicPlaying = true;
                updateMusicIcon();
                console.log('éŸ³ä¹å¼€å§‹æ’­æ”¾');
            }).catch(e => {
                console.log('éœ€è¦ç”¨æˆ·äº¤äº’æ‰èƒ½æ’­æ”¾éŸ³ä¹');
                // æ˜¾ç¤ºæç¤º
                const playHint = document.createElement('div');
                playHint.innerHTML = 'ğŸµ ç‚¹å‡»å±å¹•ä»»æ„ä½ç½®å¼€å§‹æ’­æ”¾éŸ³ä¹ ğŸµ';
                playHint.style.cssText = `
                    position: fixed;
                    top: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: rgba(0,0,0,0.8);
                    color: #ffd166;
                    padding: 10px 20px;
                    border-radius: 20px;
                    z-index: 9999;
                    font-size: 0.9em;
                    animation: pulse 1s infinite;
                `;
                document.body.appendChild(playHint);
                
                document.body.addEventListener('click', function firstClick() {
                    birthdayMusic.play();
                    musicPlaying = true;
                    updateMusicIcon();
                    playHint.remove();
                    document.body.removeEventListener('click', firstClick);
                });
            });
        }

        // åˆ‡æ¢éŸ³ä¹
        function toggleMusic() {
            if (musicPlaying) {
                birthdayMusic.pause();
                musicPlaying = false;
            } else {
                birthdayMusic.play();
                musicPlaying = true;
            }
            updateMusicIcon();
        }

        // æ›´æ–°éŸ³ä¹å›¾æ ‡
        function updateMusicIcon() {
            document.getElementById('musicIcon').textContent = musicPlaying ? 'ğŸµ' : 'ğŸ”‡';
        }

        // åˆ›å»ºç¤¼ç‚®
        function createConfetti() {
            const colors = ['#ff6b6b', '#4ecdc4', '#ffd166', '#9d4edd', '#00bbf9'];
            const emojis = ['ğŸ‰', 'âœ¨', 'ğŸŠ', 'ğŸ’–', 'ğŸŒŸ', 'ğŸ¥³', 'ğŸˆ', 'ğŸ', 'ğŸš€', 'ğŸ—¡ï¸'];
            
            for (let i = 0; i < 100; i++) {
                createParticle(colors, emojis, false);
            }
        }

        // åˆ›å»ºå°ç¤¼ç‚®
        function createSmallConfetti() {
            const colors = ['#ff6b6b', '#4ecdc4', '#ffd166'];
            const emojis = ['âœ¨', 'ğŸŒŸ', 'ğŸ’«'];
            
            for (let i = 0; i < 30; i++) {
                createParticle(colors, emojis, true);
            }
        }

        // åˆ›å»ºç²’å­
        function createParticle(colors, emojis, isSmall) {
            const particle = document.createElement('div');
            particle.className = 'confetti';
            
            const size = isSmall ? '12px' : '18px';
            
            if (Math.random() > 0.5) {
                // é¢œè‰²æ–¹å—
                particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                particle.style.width = size;
                particle.style.height = size;
                particle.style.borderRadius = '50%';
            } else {
                // emoji
                particle.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                particle.style.fontSize = size;
                particle.style.backgroundColor = 'transparent';
            }
            
            particle.style.left = Math.random() * 100 + 'vw';
            particle.style.top = '-30px';
            particle.style.transform = `rotate(${Math.random() * 360}deg)`;
            
            document.body.appendChild(particle);
            
            // åŠ¨ç”»
            const duration = isSmall ? 1200 : 1800 + Math.random() * 1200;
            const animation = particle.animate([
                { 
                    transform: 'translateY(0) rotate(0deg)', 
                    opacity: 1 
                },
                { 
                    transform: `translateY(${window.innerHeight}px) rotate(${Math.random() * 720}deg)`, 
                    opacity: 0 
                }
            ], {
                duration: duration,
                easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
            });
            
            animation.onfinish = () => particle.remove();
        }

        // åˆ›å»ºçƒŸèŠ±
        function createFireworks() {
            // æ’­æ”¾çƒŸèŠ±éŸ³æ•ˆ
            fireworkSound.currentTime = 0;
            fireworkSound.play().catch(e => console.log('éŸ³æ•ˆå¯èƒ½éœ€è¦ç”¨æˆ·äº¤äº’'));
            
            // åˆ›å»ºå¤šä¸ªçƒŸèŠ±
            for (let i = 0; i < 6; i++) {
                setTimeout(() => {
                    createFirework();
                }, i * 150);
            }
        }

        // åˆ›å»ºå•ä¸ªçƒŸèŠ±
        function createFirework() {
            const x = Math.random() * 80 + 10;
            const y = Math.random() * 80 + 10;
            
            // çƒŸèŠ±ä¸­å¿ƒ
            const center = document.createElement('div');
            center.className = 'firework';
            center.style.left = x + 'vw';
            center.style.top = y + 'vh';
            center.style.fontSize = '35px';
            center.textContent = ['âœ¨', 'ğŸŒŸ', 'ğŸ’¥', 'ğŸ‡'][Math.floor(Math.random() * 4)];
            
            document.body.appendChild(center);
            
            // ä¸­å¿ƒçˆ†ç‚¸æ•ˆæœ
            center.animate([
                { transform: 'scale(0)', opacity: 1, color: '#ffd166' },
                { transform: 'scale(2.5)', opacity: 0, color: '#ff6b6b' }
            ], {
                duration: 1000,
                easing: 'ease-out'
            });
            
            // åˆ›å»ºçˆ†ç‚¸ç²’å­
            for (let i = 0; i < 25; i++) {
                const particle = document.createElement('div');
                particle.className = 'firework';
                particle.style.left = x + 'vw';
                particle.style.top = y + 'vh';
                particle.style.color = ['#ff6b6b', '#ffd166', '#4ecdc4', '#9d4edd'][Math.floor(Math.random() * 4)];
                particle.textContent = 'â€¢';
                particle.style.fontSize = '18px';
                
                document.body.appendChild(particle);
                
                // ç²’å­çˆ†ç‚¸åŠ¨ç”»
                const angle = Math.random() * Math.PI * 2;
                const distance = 60 + Math.random() * 120;
                const dx = Math.cos(angle) * distance;
                const dy = Math.sin(angle) * distance;
                
                particle.animate([
                    { 
                        transform: 'translate(0, 0) scale(1)', 
                        opacity: 1 
                    },
                    { 
                        transform: `translate(${dx}px, ${dy}px) scale(0)`, 
                        opacity: 0 
                    }
                ], {
                    duration: 1200 + Math.random() * 800,
                    easing: 'ease-out'
                }).onfinish = () => particle.remove();
            }
            
            setTimeout(() => center.remove(), 1200);
        }

        // æ˜¾ç¤ºçƒŸèŠ±æ–‡å­—
        function showFireworkText(text) {
            const textEl = document.createElement('div');
            textEl.textContent = text;
            textEl.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 2.2em;
                color: #ffd166;
                font-weight: bold;
                text-shadow: 0 0 20px rgba(255, 209, 102, 0.8);
                z-index: 9999;
                pointer-events: none;
                opacity: 0;
                text-align: center;
                white-space: nowrap;
                padding: 15px 30px;
                background: rgba(0,0,0,0.7);
                border-radius: 20px;
                border: 2px solid rgba(255, 209, 102, 0.3);
            `;
            
            document.body.appendChild(textEl);
            
            // åŠ¨ç”»
            textEl.animate([
                { opacity: 0, transform: 'translate(-50%, -50%) scale(0.5)', filter: 'blur(10px)' },
                { opacity: 1, transform: 'translate(-50%, -50%) scale(1.2)', filter: 'blur(0px)' },
                { opacity: 0, transform: 'translate(-50%, -50%) scale(1)', filter: 'blur(5px)' }
            ], {
                duration: 2500,
                easing: 'ease-in-out'
            }).onfinish = () => textEl.remove();
        }

        // è›‹ç³•é•¿å¤§
        function growCake() {
            clickCount++;
            document.getElementById('clickCount').textContent = clickCount;
            
            const cakeButton = document.getElementById('cakeButton');
            const ageNumber = document.getElementById('ageNumber');
            const cakeHint = document.getElementById('cakeHint');
            const cakeSizeDisplay = document.getElementById('cakeSizeDisplay');
            
            // å¢å¤§è›‹ç³•
            cakeSize += 12;
            cakeButton.style.width = cakeSize + 'px';
            cakeButton.style.height = cakeSize + 'px';
            cakeSizeDisplay.textContent = cakeSize;
            
            // æ›´æ–°æ•°å­—å¤§å°
            const newFontSize = 3 + clickCount * 0.18;
            ageNumber.style.fontSize = newFontSize + 'em';
            
            // æ›´æ–°æç¤º
            let sizeText = 'æ­£å¸¸';
            let sizeColor = '#4ecdc4';
            if (cakeSize > 250) {
                sizeText = 'è¾ƒå¤§';
                sizeColor = '#ffd166';
            }
            if (cakeSize > 350) {
                sizeText = 'è¶…å¤§';
                sizeColor = '#ff8e53';
            }
            if (cakeSize > 450) {
                sizeText = 'å·¨å¤§';
                sizeColor = '#ff6b6b';
            }
            if (cakeSize > 550) {
                sizeText = 'å·¨å‹';
                sizeColor = '#9d4edd';
            }
            
            cakeHint.textContent = `ğŸ’« ç‚¹å‡»è›‹ç³•åº†ç¥ï¼å½“å‰ï¼š${sizeText}å°ºå¯¸`;
            cakeHint.style.color = sizeColor;
            
            // æ·»åŠ ç‰¹æ•ˆ
            createSmallConfetti();
            
            // æ¯3æ¬¡ç‚¹å‡»æœ‰ç‰¹æ®Šæ•ˆæœ
            if (clickCount % 3 === 0) {
                const candles = document.getElementById('candles');
                const candleCount = Math.min(Math.floor(clickCount / 3) + 5, 15);
                candles.textContent = 'ğŸ•¯ï¸'.repeat(candleCount);
                candles.style.fontSize = (1.5 + clickCount * 0.02) + 'em';
            }
            
            // æ¯5æ¬¡ç‚¹å‡»æ”¹å˜è›‹ç³•é¢œè‰²å’Œæ”¾çƒŸèŠ±
            if (clickCount % 5 === 0) {
                const colors = [
                    'linear-gradient(135deg, #ff6b6b, #ff8e53)',
                    'linear-gradient(135deg, #4ecdc4, #00bbf9)',
                    'linear-gradient(135deg, #9d4edd, #ff6b6b)',
                    'linear-gradient(135deg, #ffd166, #ff9a3c)',
                    'linear-gradient(135deg, #00bbf9, #4ecdc4)'
                ];
                cakeButton.style.background = colors[(clickCount / 5) % colors.length];
                
                createFireworks();
                showFireworkText(`ç‚¹å‡» ${clickCount} æ¬¡ï¼`);
            }
            
            // æ¯10æ¬¡ç‚¹å‡»æœ‰å½©è›‹
            if (clickCount % 10 === 0) {
                ageNumber.textContent = '19++';
                ageNumber.style.color = '#9d4edd';
                ageNumber.style.textShadow = '0 0 25px rgba(157, 78, 221, 0.8)';
                
                // ç››å¤§åº†ç¥
                for (let i = 0; i < 3; i++) {
                    setTimeout(createFireworks, i * 400);
                }
            }
            
            // è¾¾åˆ°ä¸€å®šå¤§å°åçš„æœ€ç»ˆå½©è›‹
            if (cakeSize > 600) {
                ageNumber.textContent = '19 MAX';
                ageNumber.style.fontSize = '3.5em';
                ageNumber.style.color = '#ffd166';
                ageNumber.style.textShadow = '0 0 30px rgba(255, 209, 102, 0.9)';
                
                cakeButton.innerHTML = '<div style="font-size:0.6em; text-align:center;">ğŸ‚ğŸ‰ğŸ’–<br>ç”Ÿæ—¥å¤§å¿«ä¹ï¼<br>MAX SIZE!</div>';
                cakeHint.innerHTML = 'ğŸ‰ğŸ‰ğŸ‰ è›‹ç³•å·²ç»è¾¾åˆ°æœ€å¤§å°ºå¯¸ï¼ç”Ÿæ—¥å¤§å¿«ä¹ï¼ ğŸ‰ğŸ‰ğŸ‰';
                cakeHint.style.color = '#ffd166';
                cakeHint.style.fontSize = '1.3em';
                
                // æœ€ç»ˆç‹‚æ¬¢
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => {
                        createFireworks();
                        createConfetti();
                    }, i * 300);
                }
                
                showFireworkText('ğŸ‚ ç”Ÿæ—¥è›‹ç³•MAXï¼ç¥æä½³ä¹å°æœ‹å‹ç”Ÿæ—¥å¿«ä¹ï¼ ğŸ‚');
            }
        }

        // æ›´æ¢è§’è‰²å›¾ç‰‡
        function changeCharacter() {
            const chars = document.querySelectorAll('.character-float');
            
            chars.forEach((char, index) => {
                // éšæœºé€‰æ‹©ä¸€ä¸ªæ–°å›¾ç‰‡
                const isStarRail = char.classList.contains('star-rail-char') || char.classList.contains('star-rail-char2');
                const imageArray = isStarRail ? CONFIG.starRailCharacters : CONFIG.demonSlayerCharacters;
                const newImage = imageArray[Math.floor(Math.random() * imageArray.length)];
                
                // æ·»åŠ æ·¡å‡ºæ•ˆæœ
                char.style.opacity = '0.3';
                setTimeout(() => {
                    char.src = newImage + '?t=' + new Date().getTime(); // æ·»åŠ æ—¶é—´æˆ³é¿å…ç¼“å­˜
                    char.style.opacity = '0.6';
                    
                    // æ·»åŠ æ›´æ¢åŠ¨ç”»
                    char.animate([
                        { transform: 'scale(0.8)', opacity: 0.3 },
                        { transform: 'scale(1.2)', opacity: 0.8 },
                        { transform: 'scale(1)', opacity: 0.6 }
                    ], {
                        duration: 800,
                        easing: 'ease-out'
                    });
                }, 300);
            });
            
            createSmallConfetti();
            showFireworkText('è§’è‰²æ›´æ¢å®Œæˆï¼');
        }

        // æ˜¾ç¤ºéšæœºç¥ç¦è¯­
        function showRandomMessage() {
            const message = birthdayMessages[Math.floor(Math.random() * birthdayMessages.length)];
            showFireworkText(message);
            createSmallConfetti();
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.onload = initPage;
        
        // å¾®ä¿¡ä¸­è‡ªåŠ¨æ’­æ”¾éŸ³ä¹çš„å…¼å®¹å¤„ç†
        document.addEventListener('WeixinJSBridgeReady', function() {
            console.log('å¾®ä¿¡ç¯å¢ƒæ£€æµ‹åˆ°ï¼Œå‡†å¤‡æ’­æ”¾éŸ³ä¹');
            birthdayMusic.play();
            musicPlaying = true;
            updateMusicIcon();
        }, false);

        // è§£å†³ç§»åŠ¨ç«¯ç‚¹å‡»å»¶è¿Ÿ
        if ('ontouchstart' in window) {
            document.documentElement.style.cursor = 'pointer';
        }
        
        // æ·»åŠ CSSåŠ¨ç”»
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>





